"use strict";(self.webpackChunkpms_client=self.webpackChunkpms_client||[]).push([[876],{3876:function(e,r,n){n.r(r);var t=n(4165),i=n(5861),a=n(9439),o=n(1413),s=n(2791),u=n(1134),c=n(2901),l=n(9169),p=n(9434),d=n(4346),f=n(9164),m=n(5527),h=n(1889),x=n(4554),v=n(3044),Z=n(7078),g=n(6151),P=n(890),y=n(8550),j=n(7689),w=n(8068),b=n(3400),U=n(68),k=n(184);var C={root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginTop:"16px",borderRadius:"5px",margin:"auto",width:"12em",padding:0},avatar:{width:"80px",height:"80px"},input:{display:"none"},button:{marginTop:"24px"},caption:{fontSize:"12px",color:"rgba(0, 0, 0, 0.54)",marginTop:"8px"}};r.default=function(e){e.userId,e.handleClose;var r,n=(0,s.useState)({}),z=(0,a.Z)(n,2),W=z[0],I=z[1],S=(0,p.v9)((function(e){return e.user.user})),T=(0,p.I0)(),q=(0,j.UO)(),F=(r=(0,u.cI)({mode:"onChange",defaultValues:{email:null===W||void 0===W?void 0:W.email,name:W.name}}),(0,o.Z)((0,o.Z)({},r),{},{register:function(e,n){return(0,o.Z)((0,o.Z)({},r.register(e,n)),{},{InputLabelProps:{shrink:!!r.watch(e)}})}})),V=F.handleSubmit,A=F.register,D=F.formState.errors,L=(F.watch,F.control,F.reset),R=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r){var n,i,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.target.files[0],(i=new FormData).append("profile",n),e.next=5,c.W.updateProfile(q.id,i);case 5:(a=e.sent)&&(l.a.success("Profile picture updated successfully"),T((0,d.Vx)((0,o.Z)((0,o.Z)({},S),{},{profilePicture:a.profilePicture}))),I(a)),r.target.value="";case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.W.removeProfilePicture(q.id);case 2:(r=e.sent)&&(l.a.success("Profile picture removed successfully"),console.log(r),T((0,d.Vx)((0,o.Z)((0,o.Z)({},S),{},{profilePicture:r.profilePicture}))),I(r));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.W.getUser(q.id);case 3:r=e.sent,I(r),L(r),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var E=function(){var e=(0,i.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.W.updateUser(q.id,r);case 2:(n=e.sent)&&(l.a.success("user updated successfully"),T((0,d.Vx)((0,o.Z)((0,o.Z)({},S),{},{name:n.name,email:n.email,phone:n.phone}))),I(n));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(f.Z,{children:(0,k.jsx)(m.Z,{sx:{m:0,px:2,py:2,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",borderRadius:"6px"},elevation:0,children:(0,k.jsxs)(h.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,k.jsx)(h.ZP,{item:!0,sm:6,children:(0,k.jsxs)("div",{style:C.root,children:[W.profilePicture&&(0,k.jsx)(x.Z,{sx:{width:"100%",display:"flex",flexDirection:"row-reverse",mt:1},children:(0,k.jsx)(U.Z,{title:"Remove-Picture",children:(0,k.jsx)(b.Z,{onClick:$,children:(0,k.jsx)(w.Z,{style:{color:"gray"},sx:{}})})})}),(0,k.jsx)(v.Z,{alt:"Profile Picture",src:W.profilePicture,sx:{fontSize:"2rem"},style:C.avatar}),(0,k.jsx)(Z.Z,{type:"file",inputProps:{accept:"image/*"},style:C.input,id:"profile-pic-upload",onChange:R}),(0,k.jsx)("label",{htmlFor:"profile-pic-upload",children:(0,k.jsx)(g.Z,{variant:"contained",color:"primary",component:"span",style:C.button,children:"Upload Profile Picture"})}),(0,k.jsx)(P.Z,{style:C.caption,children:"Max file size: 2MB"})]})}),(0,k.jsxs)(h.ZP,{item:!0,sm:"6",children:[(0,k.jsx)(x.Z,{children:(0,k.jsx)(P.Z,{variant:"h6",color:"primary",children:"UPDATE USER"})}),(0,k.jsxs)("form",{style:{width:"100%",marginTop:4},onSubmit:V(E),noValidate:!0,children:[(0,k.jsx)(y.Z,(0,o.Z)((0,o.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,id:"username",label:"name",name:"name"},A("name",{required:!0})),{},{autoFocus:!0,size:"small",error:!(null===D||void 0===D||!D.name),helperText:(null===D||void 0===D?void 0:D.name)&&"Name is required"})),(0,k.jsx)(y.Z,(0,o.Z)((0,o.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,id:"email",label:"email",name:"email"},A("email",{required:"Email is required",pattern:{value:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Please enter a valid email"}})),{},{autoComplete:"email",autoFocus:!0,size:"small",error:!(null===D||void 0===D||!D.email),helperText:(null===D||void 0===D?void 0:D.email)&&D.email.message})),(0,k.jsx)(y.Z,(0,o.Z)((0,o.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,id:"phone",label:"phone",name:"phone"},A("phone",{required:"Phone is required",pattern:{value:/^([+]?[\s0-9]+)?(\d{3}|[(]?[0-9]+[)])?([-]?[\s]?[0-9])+$/i,message:"Please enter a valid phone number"}})),{},{autoFocus:!0,size:"small",error:!(null===D||void 0===D||!D.phone),helperText:(null===D||void 0===D?void 0:D.phone)&&D.phone.message})),(0,k.jsx)(g.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:2},children:"Update"})]})]})]})})})})}},9169:function(e,r,n){n.d(r,{a:function(){return i}});var t=n(9655),i={success:function(e){t.Am.success(e)},error:function(e){t.Am.error(e)}}},2901:function(e,r,n){n.d(r,{W:function(){return a}});var t=n(5875),i=n(9169);var a={addPosition:function(e){return(0,t.v_)("/hire",e).then((function(e){return e})).catch((function(e){return console.log(e)}))},getUsers:function(e){return(0,t.U2)("/user".concat(e?"?search=".concat(e):"")).then((function(e){return e}))},getUser:function(e){return(0,t.U2)("/user/".concat(e)).then((function(e){return e}))},updateUser:function(e,r){return(0,t.r$)("/user/".concat(e),r).then((function(e){return e}))},updateProfile:function(e,r){return(0,t.r$)("/user/profile-picture/".concat(e),r).then((function(e){return e}))},updatePassword:function(e,r){return(0,t.r$)("/user/password/".concat(e),r).then((function(e){return e})).catch((function(e){console.log(e),e.response.data.code<500?i.a.error(e.response.data.message):i.a.error("Something went wrong")}))},removeProfilePicture:function(e){return(0,t.IV)("/user/profile-picture/".concat(e)).then((function(e){return e}))}}},8068:function(e,r,n){var t=n(4836);r.Z=void 0;var i=t(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"ClearRounded");r.Z=o}}]);
//# sourceMappingURL=876.dd46f2ff.chunk.js.map