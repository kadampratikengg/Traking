"use strict";(self.webpackChunkpms_client=self.webpackChunkpms_client||[]).push([[610],{1610:function(e,r,n){n.r(r),n.d(r,{default:function(){return X}});var t=n(2791),a=n(4165),s=n(5861),i=n(9439),l=n(1087),o=n(6890),u=n(5855),c=n(3994),d=n(6314),p=n(890),m=n(4554),f=n(9281),h=n(9836),x=n(3382),v=n(533),Z=n(6151),g=n(3967),b=n(184),j=function(e){var r,n=e.color,t=e.size,a=(0,g.Z)();switch(n){case"secondary":r=a.palette.secondary.main;break;case"error":r=a.palette.error.main;break;case"warning":r=a.palette.warning.main;break;case"info":r=a.palette.info.main;break;case"success":r=a.palette.success.main;break;default:r=a.palette.primary.main}return(0,b.jsx)(m.Z,{sx:{width:t||8,height:t||8,borderRadius:"50%",bgcolor:r}})},w=n(2901),y=n(5945),k=n(1413),P=n(1134),C=n(9169),I=n(3786),S=n(8096),U=n(7071),W=n(7198),q=n(9164),T=n(5527),z=n(8550),A=n(4925),R=n(9174),E={inputProps:{"aria-label":"Checkbox demo"}};var N=function(e){var r,n=e.userId,l=e.handleClose,o=(0,t.useState)({}),u=(0,i.Z)(o,2),c=u[0],d=u[1],f=(r=(0,P.cI)({mode:"onChange",defaultValues:{email:null===c||void 0===c?void 0:c.email,name:c.name}}),(0,k.Z)((0,k.Z)({},r),{},{register:function(e,n){return(0,k.Z)((0,k.Z)({},r.register(e,n)),{},{InputLabelProps:{shrink:!!r.watch(e)}})}})),h=f.handleSubmit,x=f.register,v=f.formState.errors,g=f.watch,j=f.control,y=f.reset,N=t.useState(!1),F=(0,i.Z)(N,2),V=F[0],$=F[1],D=["admin","hr","buyer","seller"],_=["Active","Inactive"],B={marginBottom:"8px"};(0,t.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.W.getUser(n);case 3:r=e.sent,d(r),y(r),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var L=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.W.updateUser(n,r);case 2:e.sent&&(C.a.success("user updated successfully"),l());case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(q.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"6px",p:0},maxWidth:"xs",children:(0,b.jsxs)(T.Z,{sx:{m:0,px:0,py:2,display:"flex",flexDirection:"column",borderRadius:"6px"},elevation:0,children:[(0,b.jsx)(m.Z,{sx:{p:0,display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,b.jsx)(p.Z,{variant:"h6",color:"primary",children:"UPDATE USER"})}),(0,b.jsxs)("form",{style:{width:"100%",marginTop:4},onSubmit:h(L),noValidate:!0,children:[(0,b.jsx)(z.Z,(0,k.Z)((0,k.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,id:"username",label:"name",name:"name"},x("name",{required:!0})),{},{autoFocus:!0,size:"small",error:!(null===v||void 0===v||!v.name),helperText:(null===v||void 0===v?void 0:v.name)&&"Name is required"})),(0,b.jsx)(z.Z,(0,k.Z)((0,k.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,id:"username",label:"email",name:"email"},x("email",{required:!0})),{},{autoComplete:"email",autoFocus:!0,size:"small",error:!(null===v||void 0===v||!v.email),helperText:(null===v||void 0===v?void 0:v.email)&&"Email is required"})),(0,b.jsxs)(S.Z,{fullWidth:!0,sx:{mt:2},margin:"dense",children:[(0,b.jsx)(A.Z,{style:B,children:"role"}),(0,b.jsx)(P.Qr,{name:"role",control:j,defaultValue:"",render:function(e){var r=e.field;return(0,b.jsx)(W.Z,(0,k.Z)((0,k.Z)((0,k.Z)({},r),{},{margin:"dense",size:"small",label:"role"},x("role",{required:!0})),{},{helperText:(null===v||void 0===v?void 0:v.role)&&"Role is required",error:!!v.role,children:D.map((function(e){return(0,b.jsx)(I.Z,{value:e,children:e})}))}))}}),(0,b.jsx)(U.Z,{color:"error",children:(null===v||void 0===v?void 0:v.role)&&"Role is required"})]}),(0,b.jsxs)(S.Z,{fullWidth:!0,sx:{mt:2},margin:"dense",children:[(0,b.jsx)(A.Z,{style:B,children:"status"}),(0,b.jsx)(P.Qr,{name:"status",control:j,defaultValue:"",render:function(e){var r=e.field;return(0,b.jsx)(W.Z,(0,k.Z)((0,k.Z)({},r),{},{margin:"dense",size:"small",label:"status",children:_.map((function(e){return(0,b.jsx)(I.Z,{value:e,children:e})}))}))}})]}),(0,b.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"end",alignItems:"center"},children:[(0,b.jsx)(p.Z,{color:"primary",children:"change password"}),(0,b.jsx)(R.Z,(0,k.Z)((0,k.Z)({size:"small"},E),{},{checked:V,onChange:function(e){$(e.target.checked)},inputProps:{"aria-label":"controlled"}}))]}),V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Z,(0,k.Z)((0,k.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,name:"password",label:"password",id:"password"},x("password",{required:!0,minLength:{value:8,message:"Password must be at least 8 characters long"},pattern:{value:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).*$/,message:"Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character"}})),{},{size:"small",error:V&&!(null===v||void 0===v||!v.password),helperText:V&&(null===v||void 0===v?void 0:v.password)&&"password is required"})),(0,b.jsx)(z.Z,(0,k.Z)((0,k.Z)({sx:{mt:2},variant:"outlined",margin:"dense",fullWidth:!0,name:"cpassword",label:"confirm password",id:"password"},x("cpassword",{required:!0,validate:function(e){return e===g("password")||"Passwords do not match"}})),{},{size:"small",error:V&&!(null===v||void 0===v||!v.cpassword),helperText:V&&(null===v||void 0===v?void 0:v.cpassword)&&"password is required"}))]}):(0,b.jsx)(b.Fragment,{}),(0,b.jsx)(Z.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:2},children:"Update"})]})]})})})},F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:2,outline:"none",borderRadius:"8px"};function V(e){var r=e.userId,n=e.open,t=e.handleClose;return(0,b.jsx)("div",{children:(0,b.jsx)(y.Z,{sx:{p:0},open:n,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,b.jsx)(m.Z,{sx:F,children:(0,b.jsx)(N,{userId:r,handleClose:t})})})})}function $(e,r,n){return r[n]<e[n]?-1:r[n]>e[n]?1:0}function D(e,r){return"desc"===e?function(e,n){return $(e,n,r)}:function(e,n){return-$(e,n,r)}}function _(e,r){var n=null===e||void 0===e?void 0:e.map((function(e,r){return[e,r]}));return null===n||void 0===n||n.sort((function(e,n){var t=r(e[0],n[0]);return 0!==t?t:e[1]-n[1]})),null===n||void 0===n?void 0:n.map((function(e){return e[0]}))}var B=[{id:"userName",align:"left",disablePadding:!1,label:"User Name"},{id:"email",align:"left",disablePadding:!0,label:"Email"},{id:"role",align:"left",disablePadding:!1,label:"Role"},{id:"status",align:"left",disablePadding:!1,label:"Status"},{id:"update",align:"left",disablePadding:!1,label:"Update"}];function L(e){var r=e.user,n=e.userBy;return(0,b.jsx)(o.Z,{children:(0,b.jsx)(u.Z,{children:B.map((function(e){return(0,b.jsx)(c.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&r,children:e.label},e.id)}))})})}var M=function(e){var r,n;switch(e.status){case 0:r="warning",n="Pending";break;case"Active":r="success",n="Active";break;case"Inactive":r="error",n="Inactive";break;default:r="primary",n="None"}return(0,b.jsxs)(d.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,b.jsx)(j,{color:r}),(0,b.jsx)(p.Z,{children:n})]})};function Q(){var e,r=(0,t.useState)("asc"),n=(0,i.Z)(r,1)[0],o=(0,t.useState)("email"),d=(0,i.Z)(o,1)[0],p=(0,t.useState)([]),g=(0,i.Z)(p,1)[0],j=(0,t.useState)(),y=(0,i.Z)(j,2),k=y[0],P=y[1],C=(0,t.useState)(""),I=(0,i.Z)(C,2),S=I[0],U=I[1],W=(0,t.useState)(!1),q=(0,i.Z)(W,2),T=q[0],z=q[1],A=null===k||void 0===k?void 0:k.map((function(e){return function(e,r,n,t,a){return{userName:e,email:r,role:n,status:t,userId:a}}(e.name.split(" ")[0],e.email,e.role,e.status,e._id)}));(0,t.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.W.getUsers();case 3:r=e.sent,P(r),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[T]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Z,{children:(0,b.jsx)(f.Z,{sx:{width:"100%",overflowX:"auto",position:"relative",display:"block",maxWidth:"100%","& td, & th":{whiteSpace:"nowrap"}},children:(0,b.jsxs)(h.Z,{"aria-labelledby":"tableTitle",sx:{"& .MuiTableCell-root:first-of-type":{pl:2},"& .MuiTableCell-root:last-of-type":{pr:3}},children:[(0,b.jsx)(L,{user:n,userBy:d}),(0,b.jsx)(x.Z,{children:null===(e=_(A,D(n,d)))||void 0===e?void 0:e.map((function(e,r){var n,t=(n=e.email,-1!==g.indexOf(n)),a="enhanced-table-checkbox-".concat(r);return(0,b.jsxs)(u.Z,{hover:!0,role:"checkbox",sx:{"&:last-child td, &:last-child th":{buser:0}},"aria-checked":t,tabIndex:-1,selected:t,children:[(0,b.jsx)(c.Z,{component:"th",id:a,scope:"row",align:"left",children:(0,b.jsx)(v.Z,{color:"secondary",component:l.rU,to:"",children:e.userName})}),(0,b.jsx)(c.Z,{align:"left",children:e.email}),(0,b.jsx)(c.Z,{align:"left",children:e.role}),(0,b.jsx)(c.Z,{align:"left",children:(0,b.jsx)(M,{status:e.status})}),(0,b.jsx)(c.Z,{align:"left",children:(0,b.jsx)(Z.Z,{onClick:function(){return function(e){U(e),z(!0)}(e.userId)},children:"UPDATE"})})]},e.trackingNo)}))})]})})}),(0,b.jsx)(V,{userId:S,open:T,handleClose:function(){return z(!1)}})]})}var O=n(7135);var X=function(){return(0,b.jsx)(O.Z,{container:!0,alignItems:"center",justifyContent:"space-between",children:(0,b.jsx)(Q,{})})}},9169:function(e,r,n){n.d(r,{a:function(){return a}});var t=n(9655),a={success:function(e){t.Am.success(e)},error:function(e){t.Am.error(e)}}},2901:function(e,r,n){n.d(r,{W:function(){return s}});var t=n(5875),a=n(9169);var s={addPosition:function(e){return(0,t.v_)("/hire",e).then((function(e){return e})).catch((function(e){return console.log(e)}))},getUsers:function(e){return(0,t.U2)("/user".concat(e?"?search=".concat(e):"")).then((function(e){return e}))},getUser:function(e){return(0,t.U2)("/user/".concat(e)).then((function(e){return e}))},updateUser:function(e,r){return(0,t.r$)("/user/".concat(e),r).then((function(e){return e}))},updateProfile:function(e,r){return(0,t.r$)("/user/profile-picture/".concat(e),r).then((function(e){return e}))},updatePassword:function(e,r){return(0,t.r$)("/user/password/".concat(e),r).then((function(e){return e})).catch((function(e){console.log(e),e.response.data.code<500?a.a.error(e.response.data.message):a.a.error("Something went wrong")}))},removeProfilePicture:function(e){return(0,t.IV)("/user/profile-picture/".concat(e)).then((function(e){return e}))}}}}]);
//# sourceMappingURL=610.eb6ed886.chunk.js.map