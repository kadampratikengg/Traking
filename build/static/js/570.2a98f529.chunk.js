"use strict";(self.webpackChunkpms_client=self.webpackChunkpms_client||[]).push([[570],{6570:function(e,n,t){t.r(n);var r=t(4165),i=t(5861),o=t(9439),a=t(1413),c=t(2791),u=t(1134),s=t(9164),l=t(890),d=t(1889),f=t(8550),p=t(6151),h=t(4554),x=t(5527),m=t(9596),Z=t(7831),v=t(5087),b=t(9169),j=t(7689),g=t(9434),y=t(3593),P=t(184);n.default=function(){var e,n=(0,c.useRef)({}),t=(e=(0,u.cI)({mode:"onChange",defaultValues:{}}),(0,a.Z)((0,a.Z)({},e),{},{register:function(t,r){var i;return(0,a.Z)((0,a.Z)({},e.register(t,r)),{},{InputLabelProps:{shrink:!!e.watch(t)||(null===n||void 0===n||null===(i=n.current.product)||void 0===i?void 0:i.focus())}})}})),q=t.handleSubmit,C=t.register,D=t.formState.errors,I=(t.watch,t.control,t.reset),w=(t.Controller,(0,c.useState)(null)),L=(0,o.Z)(w,2),U=(L[0],L[1]),k=(0,j.UO)(),S=(0,j.s0)(),R=(0,g.I0)();(0,c.useEffect)((function(){k.id&&N()}),[]);var N=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.h.getLead(k.id);case 2:n=e.sent,I(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=(0,c.useCallback)(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("file",n[0]),e.next=4,v.h.leadUpload(t);case 4:e.sent&&(b.a.success("published requirements"),S("/Drafts")),U(n[0]);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[]),W=(0,Z.uI)({onDrop:T,accept:".xlsx"}),z=W.getRootProps,O=W.getInputProps,_=W.isDragActive,A=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.id){e.next=7;break}return e.next=3,v.h.updateLead(k.id,n);case 3:(t=e.sent).draft?(R((0,y.zw)({openItem:["drafts"]})),S("/drafts")):(R((0,y.zw)({openItem:["dashboard"]})),S("/Dashboard")),e.next=11;break;case 7:return e.next=9,v.h.addLead(n);case 9:t=e.sent,S("/Dashboard");case 11:t&&(b.a.success("published requirement"),I());case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,P.jsxs)(s.Z,{children:[(0,P.jsx)("form",{onSubmit:q(A),children:(0,P.jsxs)(s.Z,{children:[(0,P.jsx)(l.Z,{variant:"h5",sx:{mb:1},children:"Publish Requirement"}),(0,P.jsx)(d.ZP,{container:!0,spacing:3,children:(0,P.jsx)(d.ZP,{item:!0,xs:12,children:(0,P.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,P.jsx)(d.ZP,{item:!0,xs:6,children:(0,P.jsx)(f.Z,(0,a.Z)({name:"product",id:"outlined-basic",label:"Product",variant:"outlined",inputProps:{"aria-label":"Description"},ref:function(e){return n.current.product=e},fullWidth:!0,error:!(null===D||void 0===D||!D.product),helperText:(null===D||void 0===D?void 0:D.product)&&"Product name is required"},C("product",{required:!0})))}),(0,P.jsx)(d.ZP,{item:!0,xs:6,children:(0,P.jsx)(f.Z,(0,a.Z)({name:"hsnNumber",label:"HSN number",fullWidth:!0,ref:function(e){return n.current.hsnNumber=e},error:!(null===D||void 0===D||!D.hsnNumber),helperText:(null===D||void 0===D?void 0:D.hsnNumber)&&"HSN number is required"},C("hsnNumber",{required:!0})))}),(0,P.jsx)(d.ZP,{item:!0,xs:12,sm:6,children:(0,P.jsx)(f.Z,(0,a.Z)({name:"quantity",label:"Quantity",type:"number",fullWidth:!0,error:!(null===D||void 0===D||!D.quantity),helperText:(null===D||void 0===D?void 0:D.quantity)&&"Quantity is required"},C("quantity",{required:!0})))}),(0,P.jsx)(d.ZP,{item:!0,xs:12,sm:6,children:(0,P.jsx)(f.Z,(0,a.Z)({name:"lastDate",placeholder:"",fullWidth:!0,type:"date",error:!(null===D||void 0===D||!D.lastDate),helperText:(null===D||void 0===D?void 0:D.lastDate)&&"Last Date is required"},C("lastDate",{required:!0})))}),(0,P.jsx)(d.ZP,{item:!0,xs:12,children:(0,P.jsx)(f.Z,(0,a.Z)((0,a.Z)({name:"specification",label:"Specification",fullWidth:!0},C("specification",{required:!0})),{},{error:!(null===D||void 0===D||!D.specification),helperText:(null===D||void 0===D?void 0:D.specification)&&"Specifications are required",floatingLabelText:"MultiLine and FloatingLabel",multiline:!0}))}),(0,P.jsx)(d.ZP,{item:!0,xs:12,children:(0,P.jsx)(f.Z,(0,a.Z)({name:"note",label:"Note",multiline:!0,rows:2,fullWidth:!0},C("note")))}),(0,P.jsx)(d.ZP,{item:!0,xs:9,sx:{display:"flex",alignItems:"center"},children:(0,P.jsx)(l.Z,{children:"Or upload .csv file and submit button at bottom"})}),(0,P.jsx)(d.ZP,{item:!0,xs:3,sx:{display:"flex",justifyContent:"flex-end"},children:(0,P.jsx)(p.Z,{type:"submit",variant:"contained",sx:{backgroundColor:"rgb(24, 144, 255)"},children:k.id?"Update":"Submit"})})]})})})]})}),(0,P.jsx)(s.Z,{sx:{p:0},children:(0,P.jsx)(h.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",sx:{pt:2},children:(0,P.jsxs)(x.Z,(0,a.Z)((0,a.Z)({elevation:0,sx:{px:2,py:2,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}},z()),{},{style:{backgroundColor:_?"#f0f0f0":"white",border:_?"2px dashed #2196F3":"2px dashed #ccc",cursor:"pointer"},children:[(0,P.jsx)("input",(0,a.Z)({},O())),(0,P.jsx)(m.Z,{fontSize:"large",color:_?"primary":"action",sx:{mb:1}}),(0,P.jsx)(l.Z,{variant:"h6",align:"center",sx:{mb:2},children:_?"Drop the file here":"Drag and drop a file or click to select"}),(0,P.jsx)(l.Z,{variant:"body2",color:"textSecondary",align:"center",sx:{mb:2},children:"Supported formats: xlsx"})]}))})})]})}},5087:function(e,n,t){t.d(n,{h:function(){return o}});var r=t(9439),i=t(5875);var o={addLead:function(e){return(0,i.v_)("/lead",e).then((function(e){return e})).catch((function(e){return console.log(e)}))},getLeads:function(e){var n="lead?"+Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))})).join("&");return(0,i.U2)(n).then((function(e){return e}))},getBuyerLeads:function(e){var n="lead/list?"+Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))})).join("&");return(0,i.U2)(n).then((function(e){return e}))},deleteLead:function(e){return(0,i.IV)("/lead/".concat(e)).then((function(e){return console.log(e),e}))},getLead:function(e){return(0,i.U2)("/lead/".concat(e)).then((function(e){return e}))},updateLead:function(e,n){return(0,i.r$)("/lead/".concat(e),n).then((function(e){return e})).catch((function(e){return console.log(e)}))},leadUpload:function(e){return(0,i.v_)("/lead/lead-upload",e).then((function(e){return e})).catch((function(e){return console.log(e)}))},getDraftedLeads:function(e){var n="lead/list?"+Object.entries(e).map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(i))})).join("&");return(0,i.U2)(n).then((function(e){return e}))},publishLeads:function(e){return(0,i.r$)("/lead",e).then((function(e){return e})).catch((function(e){return console.log(e)}))}}},9169:function(e,n,t){t.d(n,{a:function(){return i}});var r=t(9655),i={success:function(e){r.Am.success(e)},error:function(e){r.Am.error(e)}}},9596:function(e,n,t){var r=t(4836);n.Z=void 0;var i=r(t(5649)),o=t(184),a=(0,i.default)((0,o.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");n.Z=a}}]);
//# sourceMappingURL=570.2a98f529.chunk.js.map